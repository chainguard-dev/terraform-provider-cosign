---
page_title: "Provider: Cosign"
description: |-
  Terraform Provider for cosign
---

# COSIGN Provider

## Usage

### Verify

This provides a `cosign_verify` data source, which can be used with any
containerized infrastructure rules to enforce deploy-time policy checking:

```terraform
provider "cosign" {
}
```

```terraform
data "cosign_verify" "example" {
  image  = "cgr.dev/chainguard/static:latest-glibc"
  policy = file("my-policy.yaml")
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `default_attestation_entry_type` (String) Default Rekor entry type to use for attestations. Valid values are 'intoto' (default) or 'dsse'.

## Sign

This provider also exposes `cosign_sign` and `cosign_attest` resources that will
sign and attest a provided OCI digest, which is intended to compose with
OCI providers such as [`ko`](https://github.com/ko-build/terraform-provider-ko),
[`apko`](https://github.com/chainguard-dev/terraform-provider-apko), and
[`oci`](https://github.com/chainguard-dev/terraform-provider-oci).

```terraform
resource "cosign_sign" "example" {
  image = ko_build.image-build.image_ref
}
```

## Attest

```terraform
resource "cosign_attest" "example" {
  image = cosign_sign.example.signed_ref

  predicates {
    type = "https://example.com/my/predicate/type"
    json = jsonencode({
      // Your claim here!
    })
  }

  // Inlining e.g. huge SBOMs will slow down terraform a lot, so reference a file.
  predicates {
    type = "https://example.com/my/predicate/too-big-for-terraform.tfstate"
    file = {
      path   = "/tmp/giant-file.json"
      sha256 = "74af7407b59f9021f76a6f9ee66149c5df1ef6442617a805a7860ce18074158d"
    }
  }
}
```

## Environment Variables

| Name                    | Default                          | Description                                                                                    |
| ----------------------- | -------------------------------- | ---------------------------------------------------------------------------------------------- |
| TF_COSIGN_LOCAL         |                                  | Enables interative signing with Cosign locally (browser based flow only).                      |
| TF_COSIGN_CONNECTOR_ID  |                                  | Configures Sigstore Connector ID for local based signing.                                      |
| TF_COSIGN_ISSUER        | https://oauth2.sigstore.dev/auth | Configures Sigstore token issuer.                                                              |
| TF_COSIGN_CLIENT_SECRET |                                  | Configures Sigstore OAuth Client Secret.                                                       |
| TF_COSIGN_REDIRECT_URL  |                                  | Configures Sigstore interactive OAuth redirect URL. If empty, a random localhost port is used. |
| TF_COSIGN_DISABLE       |                                  | Disables all cosign operations.                                                                |
